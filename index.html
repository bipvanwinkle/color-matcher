<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Best Game Ever</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      h2 {
        margin: 0px;
      }

      .readout {
        font-size: 48px;
      }

      .button-group {
        display: flex;
        flex-direction: column;
        margin: 0px 15px;
        align-items: center;
      }

      .button-groups {
        display: flex;
        flex-direction: row;
        margin: 0px auto 50px auto;
      }

      .button {
        margin: 5px 0px;
        font-size: 20px;
        padding: 8px 25px;
      }

      .button-label {
        font-size: 32px;
        font-family: Georgia;
      }

      .interface-panel {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
    </style>
  </head>
  <body id="background" style="background-color: blue; margin: 0 auto">
    <div
      id="target"
      style="
        height: 300px;
        width: 300px;
        background-color: rgb(0, 0, 0);
        border-radius: 150px;
        margin: 50px auto 50px auto;
      "
    ></div>
    <div class="interface-panel">
      <div class="button-groups">
        <div class="button-group">
          <h2 id="red-label" class="button-label">Redness</h2>
          <button id="more-red" class="button">More Red (q)</button>
          <h2 id="red-readout" class="readout">0</h2>
          <button id="less-red" class="button">Less Red (a)</button>
        </div>
        <div class="button-group">
          <h2 id="green-label" class="button-label">Greenness</h2>
          <button id="more-green" class="button">More Green (w)</button>
          <h2 id="green-readout" class="readout">0</h2>
          <button id="less-green" class="button">Less Green (s)</button>
        </div>
        <div class="button-group">
          <h2 id="blue-label" class="button-label">Blueness</h2>
          <button id="more-blue" class="button">More Blue (e)</button>
          <h2 id="blue-readout" class="readout">0</h2>
          <button id="less-blue" class="button">Less Blue (d)</button>
        </div>
      </div>
      <button id="check" class="submit-button button">Check My Answer</button>
    </div>
  </body>
  <script
    src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
    crossorigin="anonymous"
  ></script>
  <script
    src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
    integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
    crossorigin="anonymous"
  ></script>
  <script>
    if (window.$) {
      $("#target").draggable({ revert: true });
    }
    function getRandomInt(high = 256) {
      return Math.ceil(Math.random() * high);
    }
    let targetColor = {
      red: getRandomInt(),
      green: getRandomInt(),
      blue: getRandomInt(),
    };
    let backgroundColor = {
      red: getRandomInt(),
      green: getRandomInt(),
      blue: getRandomInt(),
    };
    function updateBackground({ red, green, blue } = {}) {
      const background = document.getElementById("background");
      const newRgb = {
        ...backgroundColor,
        ...(red && red > 0 && red < 256 && { red }),
        ...(green && green > 0 && green < 255 && { green }),
        ...(blue && blue > 0 && blue < 255 && { blue }),
      };

      background.style[
        "background-color"
      ] = `rgb(${newRgb.red}, ${newRgb.green}, ${newRgb.blue})`;
      backgroundColor = newRgb;
    }
    function updateTarget({ red, green, blue } = {}) {
      const target = document.getElementById("target");
      const newRgb = {
        ...targetColor,
        ...(red >= 0 && red <= 255 && { red }),
        ...(green >= 0 && green <= 255 && { green }),
        ...(blue >= 0 && blue <= 255 && { blue }),
      };
      target.style[
        "background-color"
      ] = `rgb(${newRgb.red}, ${newRgb.green}, ${newRgb.blue})`;
      const redReadout = document.getElementById("red-readout");
      redReadout.innerText = `${newRgb.red}`;
      const greenReadout = document.getElementById("green-readout");
      greenReadout.innerText = `${newRgb.green}`;
      const blueReadout = document.getElementById("blue-readout");
      blueReadout.innerText = `${newRgb.blue}`;
      targetColor = newRgb;
    }
    function check() {
      if (
        targetColor.red === backgroundColor.red &&
        targetColor.green === backgroundColor.green &&
        targetColor.blue === backgroundColor.blue
      ) {
        alert("You got it right!");
      } else {
        alert("You got it wrong");
      }
    }
    document.getElementById("less-red").addEventListener("click", (event) => {
      updateTarget({ red: targetColor.red - 1 });
    });
    document.getElementById("more-red").addEventListener("click", (event) => {
      updateTarget({ red: targetColor.red + 1 });
    });
    document.getElementById("less-green").addEventListener("click", (event) => {
      updateTarget({ green: targetColor.green - 1 });
    });
    document.getElementById("more-green").addEventListener("click", (event) => {
      updateTarget({ green: targetColor.green + 1 });
    });
    document.getElementById("less-blue").addEventListener("click", (event) => {
      updateTarget({ blue: targetColor.blue - 1 });
    });
    document.getElementById("more-blue").addEventListener("click", (event) => {
      updateTarget({ blue: targetColor.blue + 1 });
    });

    document.getElementById("check").addEventListener("click", (event) => {
      check();
    });

    window.addEventListener("keydown", (event) => {
      const target = document.getElementById("target");
      if (event.code === "KeyQ") {
        updateTarget({ red: targetColor.red + 1 });
      } else if (event.code === "KeyA") {
        updateTarget({ red: targetColor.red - 1 });
      } else if (event.code === "KeyW") {
        updateTarget({ green: targetColor.green + 1 });
      } else if (event.code === "KeyS") {
        updateTarget({ green: targetColor.green - 1 });
      } else if (event.code === "KeyE") {
        updateTarget({ blue: targetColor.blue + 1 });
      } else if (event.code === "KeyD") {
        updateTarget({ blue: targetColor.blue - 1 });
      } else if (event.code === "Enter") {
        check();
      }
    });
    updateTarget(targetColor);
    updateBackground(backgroundColor);
  </script>
</html>
